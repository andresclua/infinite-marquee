(function(b,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("gsap")):typeof define=="function"&&define.amd?define(["exports","gsap"],i):(b=typeof globalThis<"u"?globalThis:b||self,i(b.infiniteMarquee={},b.gsap))})(this,function(b,i){"use strict";function j(s,d){let A;return s=i.gsap.utils.toArray(s),d=d||{},i.gsap.context(()=>{let T=d.onChange,E=0,e=i.gsap.timeline({repeat:d.repeat,onUpdate:T&&function(){let o=e.closestIndex();E!==o&&(E=o,T(s[o],o))},paused:d.paused,defaults:{ease:"none"},onReverseComplete:()=>e.totalTime(e.rawTime()+e.duration()*100)}),c=s.length,M=s[0].offsetLeft,f=[],g=[],C=[],y=[],u=0,P=!1,O=d.center,w=(d.speed||1)*100,v=d.snap===!1?o=>o:i.gsap.utils.snap(d.snap||1),D=0,W=O===!0?s[0].parentNode:i.gsap.utils.toArray(O)[0]||s[0].parentNode,m,U=()=>s[c-1].offsetLeft+y[c-1]/100*g[c-1]-M+C[0]+s[c-1].offsetWidth*i.gsap.getProperty(s[c-1],"scaleX")+(parseFloat(d.paddingRight)||0),B=()=>{let o=W.getBoundingClientRect(),t;s.forEach((r,n)=>{g[n]=parseFloat(i.gsap.getProperty(r,"width","px")),y[n]=v(parseFloat(i.gsap.getProperty(r,"x","px"))/g[n]*100+i.gsap.getProperty(r,"xPercent")),t=r.getBoundingClientRect(),C[n]=t.left-(n?o.right:o.left),o=t}),i.gsap.set(s,{xPercent:r=>y[r]}),m=U()},x,S=()=>{D=O?e.duration()*(W.offsetWidth/2)/m:0,O&&f.forEach((o,t)=>{f[t]=x(e.labels["label"+t]+e.duration()*g[t]/2/m-D)})},F=(o,t,r)=>{let n=o.length,a=1e10,p=0,l;for(;n--;)l=Math.abs(o[n]-t),l>r/2&&(l=r-l),l<a&&(a=l,p=n);return p},N=()=>{let o,t,r,n,a;for(e.clear(),o=0;o<c;o++)t=s[o],r=y[o]/100*g[o],n=t.offsetLeft+r-M+C[0],a=n+g[o]*i.gsap.getProperty(t,"scaleX"),e.to(t,{xPercent:v((r-a)/g[o]*100),duration:a/w},0).fromTo(t,{xPercent:v((r-a+m)/g[o]*100)},{xPercent:y[o],duration:(r-a+m-r)/w,immediateRender:!1},a/w).add("label"+o,n/w),f[o]=n/w;x=i.gsap.utils.wrap(0,e.duration())},X=o=>{let t=e.progress();e.progress(0,!0),B(),o&&N(),S(),o&&e.draggable?e.time(f[u],!0):e.progress(t,!0)},k=()=>X(!0),R;i.gsap.set(s,{x:0}),B(),N(),S(),window.addEventListener("resize",k);function I(o,t){t=t||{},Math.abs(o-u)>c/2&&(o+=o>u?-c:c);let r=i.gsap.utils.wrap(0,c,o),n=f[r];return n>e.time()!=o>u&&o!==u&&(n+=e.duration()*(o>u?1:-1)),(n<0||n>e.duration())&&(t.modifiers={time:x}),u=r,t.overwrite=!0,i.gsap.killTweensOf(R),t.duration===0?e.time(x(n)):e.tweenTo(n,t)}if(e.toIndex=(o,t)=>I(o,t),e.closestIndex=o=>{let t=F(f,e.time(),e.duration());return o&&(u=t,P=!1),t},e.current=()=>P?e.closestIndex(!0):u,e.next=o=>I(e.current()+1,o),e.previous=o=>I(e.current()-1,o),e.times=f,e.progress(1,!0).progress(0,!0),d.reversed&&(e.vars.onReverseComplete(),e.reverse()),d.draggable&&typeof Draggable=="function"){R=document.createElement("div");let o=i.gsap.utils.wrap(0,1),t,r,n,a,p,l,h=()=>e.progress(o(r+(n.startX-n.x)*t)),Y=()=>e.closestIndex(!0);typeof InertiaPlugin>"u"&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),n=Draggable.create(R,{trigger:s[0].parentNode,type:"x",onPressInit(){let z=this.x;i.gsap.killTweensOf(e),l=!e.paused(),e.pause(),r=e.progress(),X(),t=1/m,p=r/-t-z,i.gsap.set(R,{x:r/-t})},onDrag:h,onThrowUpdate:h,overshootTolerance:0,inertia:!0,snap(z){if(Math.abs(r/-t-this.x)<10)return a+p;let q=-(z*t)*e.duration(),L=x(q),J=f[F(f,L,e.duration())],H=J-L;return Math.abs(H)>e.duration()/2&&(H+=H<0?e.duration():-e.duration()),a=(q+H)/e.duration()/-t,a},onRelease(){Y(),n.isThrowing&&(P=!0)},onThrowComplete:()=>{Y(),l&&e.play()}})[0],e.draggable=n}return e.closestIndex(!0),E=u,T&&T(s[u],u),A=e,()=>window.removeEventListener("resize",k)}),A}function G(s,d){let A;return s=i.utils.toArray(s),d=d||{},i.context(()=>{let T=d.onChange,E=0,e=i.timeline({repeat:d.repeat,onUpdate:T&&function(){let t=e.closestIndex();E!==t&&(E=t,T(s[t],t))},paused:d.paused,defaults:{ease:"none"},onReverseComplete:()=>e.totalTime(e.rawTime()+e.duration()*100)}),c=s.length,M=s[0].offsetTop,f=[],g=[],C=[],y=[],u=0,P=d.center,O=t=>{let r={},n;for(n in t)r[n]=t[n];return r},w=(d.speed||1)*100,v=d.snap===!1?t=>t:i.utils.snap(d.snap||1),D=0,W=P===!0?s[0].parentNode:i.utils.toArray(P)[0]||s[0].parentNode,m,U=()=>s[c-1].offsetTop+y[c-1]/100*g[c-1]-M+C[0]+s[c-1].offsetHeight*i.getProperty(s[c-1],"scaleY")+(parseFloat(d.paddingBottom)||0),B=()=>{let t=W.getBoundingClientRect(),r;M=s[0].offsetTop,s.forEach((n,a)=>{g[a]=parseFloat(i.getProperty(n,"height","px")),y[a]=v(parseFloat(i.getProperty(n,"y","px"))/g[a]*100+i.getProperty(n,"yPercent")),r=n.getBoundingClientRect(),C[a]=r.top-(a?t.bottom:t.top),t=r}),i.set(s,{yPercent:n=>y[n]}),m=U()},x,S=()=>{D=P?e.duration()*(W.offsetWidth/2)/m:0,P&&f.forEach((t,r)=>{f[r]=x(e.labels["label"+r]+e.duration()*g[r]/2/m-D)})},F=(t,r,n)=>{let a=t.length,p=1e10,l=0,h;for(;a--;)h=Math.abs(t[a]-r),h>n/2&&(h=n-h),h<p&&(p=h,l=a);return l},N=()=>{let t,r,n,a,p;for(e.clear(),t=0;t<c;t++)r=s[t],n=y[t]/100*g[t],a=r.offsetTop+n-M+C[0],p=a+g[t]*i.getProperty(r,"scaleY"),e.to(r,{yPercent:v((n-p)/g[t]*100),duration:p/w},0).fromTo(r,{yPercent:v((n-p+m)/g[t]*100)},{yPercent:y[t],duration:(n-p+m-n)/w,immediateRender:!1},p/w).add("label"+t,a/w),f[t]=a/w;x=i.utils.wrap(0,e.duration())},X=()=>{let{enterAnimation:t,leaveAnimation:r}=d,n=e.duration()/s.length;s.forEach((a,p)=>{let l=t&&t(a,n,p),h=l&&e.duration()-x(f[p]-Math.min(n,l.duration()))<n-.05;l&&e.add(l,h?0:x(f[p]-l.duration())),l=r&&r(a,n,p),h=f[p]===e.duration(),l&&l.duration()>n&&l.duration(n),l&&e.add(l,h?0:f[p])})},k=t=>{let r=e.progress();e.progress(0,!0),B(),t&&N(),S(),X(),t&&e.draggable?e.time(f[u],!0):e.progress(r,!0)},R=()=>k(!0),I;i.set(s,{y:0}),B(),N(),S(),X(),window.addEventListener("resize",R);function o(t,r){r=O(r),Math.abs(t-u)>c/2&&(t+=t>u?-c:c);let n=i.utils.wrap(0,c,t),a=f[n];return a>e.time()!=t>u&&(a+=e.duration()*(t>u?1:-1)),r.revolutions&&(a+=e.duration()*Math.round(r.revolutions),delete r.revolutions),(a<0||a>e.duration())&&(r.modifiers={time:x}),u=n,r.overwrite=!0,i.killTweensOf(I),e.tweenTo(a,r)}if(e.elements=s,e.next=t=>o(u+1,t),e.previous=t=>o(u-1,t),e.current=()=>u,e.toIndex=(t,r)=>o(t,r),e.closestIndex=t=>{let r=F(f,e.time(),e.duration());return t&&(u=r),r},e.times=f,e.progress(1,!0).progress(0,!0),d.reversed&&(e.vars.onReverseComplete(),e.reverse()),d.draggable&&typeof Draggable=="function"){I=document.createElement("div");let t=i.utils.wrap(0,1),r,n,a,p=()=>e.progress(t(n+(a.startY-a.y)*r)),l=()=>e.closestIndex(!0);typeof InertiaPlugin>"u"&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://gsap.com/pricing"),a=Draggable.create(I,{trigger:s[0].parentNode,type:"y",onPressInit(){i.killTweensOf(e),n=e.progress(),k(),r=1/m,i.set(I,{y:n/-r})},onDrag:p,onThrowUpdate:p,inertia:!0,snap:h=>{let Y=-(h*r)*e.duration(),z=x(Y),q=f[F(f,z,e.duration())],L=q-z;return Math.abs(L)>e.duration()/2&&(L+=L<0?e.duration():-e.duration()),(Y+L)/e.duration()/-r},onRelease:l,onThrowComplete:l})[0],e.draggable=a}return e.closestIndex(!0),T&&T(s[u],u),A=e,()=>window.removeEventListener("resize",R)}),A}b.horizontalLoop=j,b.verticalLoop=G,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
