(function(h,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("gsap")):typeof define=="function"&&define.amd?define(["exports","gsap"],i):(h=typeof globalThis<"u"?globalThis:h||self,i(h.infiniteMarquee={},h.gsap))})(this,function(h,i){"use strict";function G(o,s){let x;return o=i.gsap.utils.toArray(o),s=s||{},i.gsap.context(()=>{let b=s.onChange,P=0,e=i.gsap.timeline({repeat:s.repeat,onUpdate:b&&function(){let t=e.closestIndex();P!==t&&(P=t,b(o[t],t))},paused:s.paused,defaults:{ease:"none"},onReverseComplete:()=>e.totalTime(e.rawTime()+e.duration()*100)}),u=o.length,y=o[0].offsetLeft,d=[],f=[],m=[],w=[],l=0,I=!1,g=s.center,C=(s.speed||1)*100,M=s.snap===!1?t=>t:i.gsap.utils.snap(s.snap||1),X=0,z=g===!0?o[0].parentNode:i.gsap.utils.toArray(g)[0]||o[0].parentNode,T,J=()=>o[u-1].offsetLeft+w[u-1]/100*f[u-1]-y+m[0]+o[u-1].offsetWidth*i.gsap.getProperty(o[u-1],"scaleX")+(parseFloat(s.paddingRight)||0),A=()=>{let t=z.getBoundingClientRect(),r;o.forEach((a,n)=>{f[n]=parseFloat(i.gsap.getProperty(a,"width","px")),w[n]=M(parseFloat(i.gsap.getProperty(a,"x","px"))/f[n]*100+i.gsap.getProperty(a,"xPercent")),r=a.getBoundingClientRect(),m[n]=r.left-(n?t.right:t.left),t=r}),i.gsap.set(o,{xPercent:a=>w[a]}),T=J()},R,O=()=>{X=g?e.duration()*(z.offsetWidth/2)/T:0,g&&d.forEach((t,r)=>{d[r]=R(e.labels["label"+r]+e.duration()*f[r]/2/T-X)})},S=(t,r,a)=>{let n=t.length,p=1e10,L=0,c;for(;n--;)c=Math.abs(t[n]-r),c>a/2&&(c=a-c),c<p&&(p=c,L=n);return L},D=()=>{let t,r,a,n,p;for(e.clear(),t=0;t<u;t++)r=o[t],a=w[t]/100*f[t],n=r.offsetLeft+a-y+m[0],p=n+f[t]*i.gsap.getProperty(r,"scaleX"),e.to(r,{xPercent:M((a-p)/f[t]*100),duration:p/C},0).fromTo(r,{xPercent:M((a-p+T)/f[t]*100)},{xPercent:w[t],duration:(a-p+T-a)/C,immediateRender:!1},p/C).add("label"+t,n/C),d[t]=n/C;R=i.gsap.utils.wrap(0,e.duration())},k=t=>{let r=e.progress();e.progress(0,!0),A(),t&&D(),O(),t&&e.draggable?e.time(d[l],!0):e.progress(r,!0)},q=()=>k(!0),v;i.gsap.set(o,{x:0}),A(),D(),O(),window.addEventListener("resize",q);function E(t,r){r=r||{},Math.abs(t-l)>u/2&&(t+=t>l?-u:u);let a=i.gsap.utils.wrap(0,u,t),n=d[a];return n>e.time()!=t>l&&t!==l&&(n+=e.duration()*(t>l?1:-1)),(n<0||n>e.duration())&&(r.modifiers={time:R}),l=a,r.overwrite=!0,i.gsap.killTweensOf(v),r.duration===0?e.time(R(n)):e.tweenTo(n,r)}if(e.toIndex=(t,r)=>E(t,r),e.closestIndex=t=>{let r=S(d,e.time(),e.duration());return t&&(l=r,I=!1),r},e.current=()=>I?e.closestIndex(!0):l,e.next=t=>E(e.current()+1,t),e.previous=t=>E(e.current()-1,t),e.times=d,e.progress(1,!0).progress(0,!0),s.reversed&&(e.vars.onReverseComplete(),e.reverse()),s.draggable&&typeof Draggable=="function"){v=document.createElement("div");let t=i.gsap.utils.wrap(0,1),r,a,n,p,L,c,F=()=>e.progress(t(a+(n.startX-n.x)*r)),N=()=>e.closestIndex(!0);typeof InertiaPlugin>"u"&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club"),n=Draggable.create(v,{trigger:o[0].parentNode,type:"x",onPressInit(){let W=this.x;i.gsap.killTweensOf(e),c=!e.paused(),e.pause(),a=e.progress(),k(),r=1/T,L=a/-r-W,i.gsap.set(v,{x:a/-r})},onDrag:F,onThrowUpdate:F,overshootTolerance:0,inertia:!0,snap(W){if(Math.abs(a/-r-this.x)<10)return p+L;let j=-(W*r)*e.duration(),U=R(j),K=d[S(d,U,e.duration())],B=K-U;return Math.abs(B)>e.duration()/2&&(B+=B<0?e.duration():-e.duration()),p=(j+B)/e.duration()/-r,p},onRelease(){N(),n.isThrowing&&(I=!0)},onThrowComplete:()=>{N(),c&&e.play()}})[0],e.draggable=n}return e.closestIndex(!0),P=l,b&&b(o[l],l),x=e,()=>window.removeEventListener("resize",q)}),x}function H(o,s){if(o=i.utils.toArray(o),!Array.isArray(o)||o.length===0)return null;s=s||{};let x=o[0].getBoundingClientRect(),b=o[o.length-1].getBoundingClientRect();if(!x||!b)return null;let P=x.top-x.height-Math.abs(o[1].getBoundingClientRect().top-x.bottom),e=b.top,u=e-P,y=s.speed*100||1,d=Math.abs(u/y),f=i.timeline({repeat:s.repeat||-1,paused:s.paused||!1}),m=y<0?"-=":"+=",w=y<0?"+=":"-=";return o.forEach(l=>{if(l){let I=l.getBoundingClientRect(),g=Math.abs((e-I.top)/u);y<0&&(g=1-g),f.to(l,{y:m+u*g,duration:d*g,ease:"none"},0),f.fromTo(l,{y:w+u},{y:m+(1-g)*u,ease:"none",duration:(1-g)*d,immediateRender:!1},d*g)}}),f}h.horizontalLoop=G,h.verticalLoop=H,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
